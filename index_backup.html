<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>心電図マスター講座 Complete Edition - 完全版</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.0/css/all.min.css">
    <link rel="stylesheet" href="enhanced_ecg.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@300;400;600;700&display=swap');
        
        body {
            font-family: 'Noto Sans JP', sans-serif;
            line-height: 1.6;
        }
        
        .ecg-wave {
            stroke: #10b981;
            stroke-width: 2.5;
            fill: none;
        }
        
        .ecg-wave-abnormal {
            stroke: #ef4444;
            stroke-width: 2.5;
            fill: none;
        }
        
        .gradient-bg {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        
        .pulse {
            animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
        }
        
        .fade-in {
            opacity: 0;
            transform: translateY(20px);
            transition: all 0.5s ease-in;
        }
        
        .question-box {
            border-left: 4px solid #10b981;
            background: linear-gradient(90deg, #f0fdf4 0%, #ffffff 100%);
        }
        
        .answer-box {
            border-left: 4px solid #3b82f6;
            background: linear-gradient(90deg, #eff6ff 0%, #ffffff 100%);
        }
        
        .section-divider {
            height: 3px;
            background: linear-gradient(90deg, #10b981, #3b82f6, #8b5cf6);
            margin: 2rem 0;
        }
        
        .chapter-nav {
            position: sticky;
            top: 20px;
            background: white;
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            padding: 1rem;
            margin-bottom: 2rem;
            z-index: 100;
        }
        
        .nav-item {
            display: block;
            padding: 0.5rem 1rem;
            color: #4a5568;
            text-decoration: none;
            border-radius: 6px;
            transition: all 0.2s;
        }
        
        .nav-item:hover {
            background: #edf2f7;
            color: #2d3748;
        }
        
        .clinical-tip {
            background: linear-gradient(135deg, #fef3c7 0%, #fcd34d 100%);
            border-left: 4px solid #f59e0b;
            padding: 1rem;
            border-radius: 8px;
            margin: 1rem 0;
        }
        
        .pathology-box {
            background: linear-gradient(135deg, #fee2e2 0%, #fca5a5 100%);
            border-left: 4px solid #dc2626;
            padding: 1rem;
            border-radius: 8px;
            margin: 1rem 0;
        }
        
        .measurement-guide {
            background: linear-gradient(135deg, #e0e7ff 0%, #c7d2fe 100%);
            border-left: 4px solid #4f46e5;
            padding: 1rem;
            border-radius: 8px;
            margin: 1rem 0;
        }
    </style>
</head>
<body class="bg-gray-50">
    
    <!-- ナビゲーション -->
    <div class="chapter-nav">
        <h3 class="font-bold text-lg mb-3 text-gray-800">
            <i class="fas fa-list mr-2"></i>
            目次
        </h3>
        <div class="space-y-1">
            <a href="#chapter1" class="nav-item">第1章：心電図の基礎知識</a>
            <a href="#chapter2" class="nav-item">第2章：正常心電図の読み方</a>
            <a href="#chapter3" class="nav-item">第3章：期外収縮</a>
            <a href="#chapter4" class="nav-item">第4章：頻脈性不整脈</a>
            <a href="#chapter5" class="nav-item">第5章：徐脈性不整脈</a>
            <a href="#chapter6" class="nav-item">第6章：伝導障害</a>
            <a href="#chapter7" class="nav-item">第7章：虚血性心疾患</a>
            <a href="#chapter8" class="nav-item">第8章：特殊な症候群</a>
            <a href="#chapter9" class="nav-item">第9章：電解質異常</a>
            <a href="#chapter10" class="nav-item">第10章：実践問題</a>
        </div>
    </div>

    <!-- ヘッダー -->
    <header class="gradient-bg text-white py-12">
        <div class="container mx-auto px-4">
            <div class="text-center">
                <h1 class="text-5xl font-bold mb-4">
                    <i class="fas fa-heartbeat text-red-300 mr-3 pulse"></i>
                    心電図マスター講座
                    <span class="text-yellow-300">Complete Edition</span>
                </h1>
                <p class="text-xl opacity-90 mb-2">波形を見極めて、ハートのリズムを理解しよう！</p>
                <p class="text-lg opacity-80">〜病気がみえるベースの完全版教材〜</p>
                <div class="mt-6 flex justify-center space-x-4 flex-wrap">
                    <span class="bg-red-500 px-4 py-2 rounded-full text-sm font-semibold mb-2">
                        <i class="fas fa-star mr-1"></i>
                        基礎から応用まで
                    </span>
                    <span class="bg-blue-500 px-4 py-2 rounded-full text-sm font-semibold mb-2">
                        <i class="fas fa-graduation-cap mr-1"></i>
                        医学生・研修医対応
                    </span>
                    <span class="bg-green-500 px-4 py-2 rounded-full text-sm font-semibold mb-2">
                        <i class="fas fa-stethoscope mr-1"></i>
                        臨床対応
                    </span>
                </div>
            </div>
        </div>
    </header>

    <!-- メインコンテンツ -->
    <main class="container mx-auto px-4 py-8 max-w-6xl">
        
        <!-- 第3章：期外収縮 -->
        <section id="chapter3" class="mb-12 fade-in">
            <div class="bg-white rounded-lg shadow-lg p-8">
                <h2 class="text-4xl font-bold text-gray-800 mb-8 flex items-center">
                    <i class="fas fa-exclamation-triangle text-orange-500 mr-3"></i>
                    第3章：期外収縮（Premature Contractions）
                </h2>

                <div class="mb-8">
                    <p class="text-lg text-gray-700 leading-relaxed">
                        期外収縮は最も頻度の高い不整脈で、正常な洞調律に加わる早期の異所性収縮です。
                        発生部位により<strong>上室性期外収縮（PAC）</strong>と<strong>心室性期外収縮（PVC）</strong>に分類されます。
                        健常者にも認められますが、病的な場合もあるため、適切な評価が重要です。
                    </p>
                </div>

                <!-- 上室性期外収縮 (PAC) -->
                <div class="mb-12">
                    <h3 class="text-3xl font-semibold text-orange-600 mb-8 flex items-center">
                        <i class="fas fa-level-up-alt mr-2"></i>
                        上室性期外収縮（PAC：Premature Atrial Contraction）
                    </h3>
                    
                    <!-- PAC の基本 -->
                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8">
                        <div class="bg-orange-50 p-6 rounded-lg border-l-4 border-orange-400">
                            <h4 class="text-xl font-bold text-orange-800 mb-4">PACの特徴</h4>
                            <div class="wave-container mb-4">
                                <svg width="100%" height="100" viewBox="0 0 500 100">
                                    <defs>
                                        <pattern id="grid-pac" width="20" height="20" patternUnits="userSpaceOnUse">
                                            <rect width="20" height="20" fill="none" stroke="#fca5a5" stroke-width="0.5"/>
                                            <rect width="100" height="100" fill="none" stroke="#dc2626" stroke-width="1"/>
                                        </pattern>
                                    </defs>
                                    <rect width="100%" height="100%" fill="url(#grid-pac)"/>
                                    <!-- 正常洞調律 -->
                                    <path d="M 20 50 L 60 50 L 70 40 L 80 50 L 120 50 L 125 55 L 135 25 L 150 75 L 160 50 L 200 50" class="ecg-wave"/>
                                    <!-- PAC -->
                                    <path d="M 200 50 L 220 50 L 228 35 L 236 50 L 260 50 L 265 55 L 275 25 L 290 75 L 300 50 L 320 50" class="ecg-wave" stroke="#ea580c"/>
                                    <!-- 正常洞調律続き -->
                                    <path d="M 320 50 L 380 50 L 390 40 L 400 50 L 440 50 L 445 55 L 455 25 L 470 75 L 480 50" class="ecg-wave"/>
                                    
                                    <!-- 矢印とラベル -->
                                    <path d="M 232 25 L 232 15" stroke="#ea580c" stroke-width="2" marker-end="url(#arrowhead)"/>
                                    <text x="210" y="12" fill="#ea580c" font-size="12" font-weight="bold">早期P波</text>
                                    
                                    <!-- 不完全代償性休止 -->
                                    <path d="M 160 85 L 320 85" stroke="#8b5cf6" stroke-width="2" stroke-dasharray="3,3"/>
                                    <text x="220" y="92" fill="#8b5cf6" font-size="10" font-weight="bold">不完全代償性休止</text>
                                </svg>
                            </div>
                            <ul class="text-sm text-gray-700 space-y-2">
                                <li><strong>• P波：</strong>早期に出現、形が正常と異なる</li>
                                <li><strong>• QRS：</strong>正常幅（＜0.12秒）</li>
                                <li><strong>• 代償性休止：</strong>不完全（短い）</li>
                                <li><strong>• 頻度：</strong>健常者でも40-50%に認める</li>
                            </ul>
                        </div>

                        <div class="space-y-4">
                            <div class="clinical-tip">
                                <h4 class="font-bold text-amber-800 mb-3">
                                    <i class="fas fa-stethoscope mr-2"></i>
                                    臨床的意義
                                </h4>
                                <ul class="space-y-2 text-sm">
                                    <li><strong>良性要因：</strong>ストレス、カフェイン、喫煙、睡眠不足</li>
                                    <li><strong>病的要因：</strong>心房負荷、心房拡大、電解質異常</li>
                                    <li><strong>予後：</strong>心房細動のリスク因子となることあり</li>
                                </ul>
                            </div>

                            <div class="measurement-guide">
                                <h4 class="font-bold text-indigo-800 mb-3">
                                    <i class="fas fa-search mr-2"></i>
                                    診断のポイント
                                </h4>
                                <ul class="space-y-2 text-sm">
                                    <li><strong>1. P波の形：</strong>正常洞調律のP波と異なる</li>
                                    <li><strong>2. 時期：</strong>予想されるよりも早い</li>
                                    <li><strong>3. QRS：</strong>通常は正常形態</li>
                                    <li><strong>4. 伝導：</strong>房室ブロックを伴うことあり</li>
                                </ul>
                            </div>
                        </div>
                    </div>

                    <!-- PACの種類 -->
                    <div class="mb-8">
                        <h4 class="text-xl font-bold text-orange-800 mb-4">PACの種類と特徴</h4>
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                            <div class="bg-blue-50 p-4 rounded-lg border-l-4 border-blue-400">
                                <h5 class="font-semibold text-blue-800 mb-2">正常伝導型</h5>
                                <ul class="text-sm space-y-1">
                                    <li>• QRS正常形態</li>
                                    <li>• 1:1房室伝導</li>
                                    <li>• 最も頻度が高い</li>
                                </ul>
                            </div>
                            
                            <div class="bg-yellow-50 p-4 rounded-lg border-l-4 border-yellow-400">
                                <h5 class="font-semibold text-yellow-800 mb-2">脚ブロック型</h5>
                                <ul class="text-sm space-y-1">
                                    <li>• QRS幅広い</li>
                                    <li>• 機能的脚ブロック</li>
                                    <li>• PVCと鑑別要</li>
                                </ul>
                            </div>
                            
                            <div class="bg-red-50 p-4 rounded-lg border-l-4 border-red-400">
                                <h5 class="font-semibold text-red-800 mb-2">房室ブロック型</h5>
                                <ul class="text-sm space-y-1">
                                    <li>• P波のみでQRSなし</li>
                                    <li>• 房室結節不応期</li>
                                    <li>• blocked PACと呼ぶ</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 心室性期外収縮 (PVC) -->
                <div class="mb-12">
                    <h3 class="text-3xl font-semibold text-red-600 mb-8 flex items-center">
                        <i class="fas fa-level-down-alt mr-2"></i>
                        心室性期外収縮（PVC：Premature Ventricular Contraction）
                    </h3>
                    
                    <!-- PVC の基本 -->
                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8">
                        <div class="bg-red-50 p-6 rounded-lg border-l-4 border-red-400">
                            <h4 class="text-xl font-bold text-red-800 mb-4">PVCの特徴</h4>
                            <div class="wave-container mb-4">
                                <svg width="100%" height="100" viewBox="0 0 500 100">
                                    <rect width="100%" height="100%" fill="url(#grid-pac)"/>
                                    <!-- 正常洞調律 -->
                                    <path d="M 20 50 L 60 50 L 70 40 L 80 50 L 120 50 L 125 55 L 135 25 L 150 75 L 160 50 L 200 50" class="ecg-wave"/>
                                    <!-- PVC -->
                                    <path d="M 200 50 L 220 50 L 230 60 L 250 15 L 275 85 L 295 40 L 310 50 L 360 50" class="ecg-wave-abnormal"/>
                                    <!-- 正常洞調律続き -->
                                    <path d="M 360 50 L 400 50 L 410 40 L 420 50 L 460 50 L 465 55 L 475 25 L 490 75" class="ecg-wave"/>
                                    
                                    <!-- 幅広QRS表示 -->
                                    <path d="M 220 80 L 310 80" stroke="#dc2626" stroke-width="3"/>
                                    <text x="240" y="92" fill="#dc2626" font-size="10" font-weight="bold">幅広QRS (≥0.12秒)</text>
                                    
                                    <!-- 完全代償性休止 -->
                                    <path d="M 160 15 L 360 15" stroke="#8b5cf6" stroke-width="2" stroke-dasharray="3,3"/>
                                    <text x="230" y="12" fill="#8b5cf6" font-size="10" font-weight="bold">完全代償性休止</text>
                                </svg>
                            </div>
                            <ul class="text-sm text-gray-700 space-y-2">
                                <li><strong>• P波：</strong>先行するP波なし</li>
                                <li><strong>• QRS：</strong>0.12秒以上の幅広い波形</li>
                                <li><strong>• 代償性休止：</strong>完全（長い）</li>
                                <li><strong>• T波：</strong>QRSと反対方向</li>
                            </ul>
                        </div>

                        <div class="pathology-box">
                            <h4 class="font-bold text-red-800 mb-3">
                                <i class="fas fa-exclamation-circle mr-2"></i>
                                PVCの重要な分類
                            </h4>
                            
                            <div class="space-y-4">
                                <div>
                                    <h5 class="font-semibold text-red-700 mb-2">形態による分類</h5>
                                    <ul class="space-y-1 text-sm">
                                        <li><strong>単形性：</strong>同一起源、比較的安全</li>
                                        <li><strong>多形性：</strong>多起源、危険性が高い</li>
                                        <li><strong>二方向性：</strong>交互に異なる形態</li>
                                    </ul>
                                </div>
                                
                                <div>
                                    <h5 class="font-semibold text-red-700 mb-2">連発による分類</h5>
                                    <ul class="space-y-1 text-sm">
                                        <li><strong>単発：</strong>1個ずつ出現</li>
                                        <li><strong>二段脈：</strong>1個おきに出現</li>
                                        <li><strong>三段脈：</strong>2個おきに出現</li>
                                        <li><strong>連発：</strong>2個以上連続（危険）</li>
                                    </ul>
                                </div>
                                
                                <div>
                                    <h5 class="font-semibold text-red-700 mb-2">タイミングによる分類</h5>
                                    <ul class="space-y-1 text-sm">
                                        <li><strong>R on T現象：</strong>T波上に出現、VFリスク</li>
                                        <li><strong>Late PVC：</strong>T波後に出現、比較的安全</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Lownの分類 -->
                    <div class="mb-8">
                        <h4 class="text-xl font-bold text-red-800 mb-4">Lownの分類（重症度評価）</h4>
                        <div class="grid grid-cols-1 md:grid-cols-5 gap-4">
                            <div class="bg-green-100 p-4 rounded-lg border-l-4 border-green-500">
                                <h5 class="font-bold text-green-800 mb-2">Grade 0</h5>
                                <p class="text-sm">PVCなし</p>
                            </div>
                            
                            <div class="bg-green-100 p-4 rounded-lg border-l-4 border-green-500">
                                <h5 class="font-bold text-green-800 mb-2">Grade 1</h5>
                                <p class="text-sm">散発性PVC</p>
                                <p class="text-xs text-green-700">＜30個/時</p>
                            </div>
                            
                            <div class="bg-yellow-100 p-4 rounded-lg border-l-4 border-yellow-500">
                                <h5 class="font-bold text-yellow-800 mb-2">Grade 2</h5>
                                <p class="text-sm">頻発性PVC</p>
                                <p class="text-xs text-yellow-700">≥30個/時</p>
                            </div>
                            
                            <div class="bg-orange-100 p-4 rounded-lg border-l-4 border-orange-500">
                                <h5 class="font-bold text-orange-800 mb-2">Grade 3</h5>
                                <p class="text-sm">多形性PVC</p>
                                <p class="text-xs text-orange-700">形態が異なる</p>
                            </div>
                            
                            <div class="bg-red-100 p-4 rounded-lg border-l-4 border-red-500">
                                <h5 class="font-bold text-red-800 mb-2">Grade 4-5</h5>
                                <p class="text-sm">4a: couplet</p>
                                <p class="text-sm">4b: VT</p>
                                <p class="text-sm">5: R on T</p>
                            </div>
                        </div>
                        
                        <div class="clinical-tip mt-4">
                            <h5 class="font-bold text-amber-800 mb-2">
                                <i class="fas fa-heart mr-2"></i>
                                臨床的意義
                            </h5>
                            <ul class="space-y-1 text-sm">
                                <li><strong>Grade 0-2：</strong>経過観察、症状があれば治療考慮</li>
                                <li><strong>Grade 3-4a：</strong>心機能評価、治療検討</li>
                                <li><strong>Grade 4b-5：</strong>緊急治療適応、VF移行リスク</li>
                            </ul>
                        </div>
                    </div>

                    <!-- PVCの起源同定 -->
                    <div class="mb-8">
                        <h4 class="text-xl font-bold text-red-800 mb-4">PVCの起源同定</h4>
                        <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                            <div class="measurement-guide">
                                <h5 class="font-semibold text-indigo-800 mb-3">右室起源PVC</h5>
                                <ul class="space-y-1 text-sm">
                                    <li>• V1でQS型またはrS型</li>
                                    <li>• 下壁誘導で上向き</li>
                                    <li>• 左脚ブロック様形態</li>
                                    <li>• 流出路起源が多い</li>
                                </ul>
                            </div>
                            
                            <div class="measurement-guide">
                                <h5 class="font-semibold text-indigo-800 mb-3">左室起源PVC</h5>
                                <ul class="space-y-1 text-sm">
                                    <li>• V1でR型またはRS型</li>
                                    <li>• 右脚ブロック様形態</li>
                                    <li>• 心疾患に伴うことが多い</li>
                                    <li>• より病的な意義</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 治療とフォローアップ -->
                <div class="mb-10">
                    <h3 class="text-2xl font-semibold text-purple-600 mb-6 flex items-center">
                        <i class="fas fa-prescription-bottle-alt mr-2"></i>
                        期外収縮の治療とフォローアップ
                    </h3>
                    
                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                        <div class="clinical-tip">
                            <h4 class="font-bold text-amber-800 mb-3">
                                <i class="fas fa-pills mr-2"></i>
                                薬物療法
                            </h4>
                            <div class="space-y-3">
                                <div>
                                    <h5 class="font-semibold mb-1">上室性期外収縮</h5>
                                    <ul class="text-sm space-y-1">
                                        <li>• β遮断薬（第一選択）</li>
                                        <li>• Ca拮抗薬（ベラパミル等）</li>
                                        <li>• 抗不整脈薬（症状が強い場合）</li>
                                    </ul>
                                </div>
                                
                                <div>
                                    <h5 class="font-semibold mb-1">心室性期外収縮</h5>
                                    <ul class="text-sm space-y-1">
                                        <li>• β遮断薬（症状軽減）</li>
                                        <li>• Ia群抗不整脈薬</li>
                                        <li>• アミオダロン（重症例）</li>
                                        <li>• ICD（高リスク例）</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                        
                        <div class="pathology-box">
                            <h4 class="font-bold text-red-800 mb-3">
                                <i class="fas fa-search-plus mr-2"></i>
                                検査・評価
                            </h4>
                            <div class="space-y-3">
                                <div>
                                    <h5 class="font-semibold mb-1">基本検査</h5>
                                    <ul class="text-sm space-y-1">
                                        <li>• 12誘導心電図</li>
                                        <li>• Holter心電図（24時間）</li>
                                        <li>• 心エコー検査</li>
                                        <li>• 血液検査（電解質）</li>
                                    </ul>
                                </div>
                                
                                <div>
                                    <h5 class="font-semibold mb-1">追加検査（必要時）</h5>
                                    <ul class="text-sm space-y-1">
                                        <li>• 運動負荷試験</li>
                                        <li>• 心カテーテル検査</li>
                                        <li>• 心筋シンチ</li>
                                        <li>• 電気生理学的検査</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <div class="section-divider"></div>

    </main>

    <!-- フッター -->
    <footer class="gradient-bg text-white py-8">
        <div class="container mx-auto px-4 text-center">
            <p class="text-lg mb-2">
                <i class="fas fa-heartbeat text-red-300 mr-2 pulse"></i>
                心電図マスター講座 Complete Edition
            </p>
            <p class="opacity-80">
                病気がみえるベースの包括的心電図教材
            </p>
            <p class="text-sm mt-4 opacity-70">
                ※この教材は教育目的で作成されています。実際の臨床では必ず指導医と相談してください。
            </p>
        </div>
    </footer>

    <!-- JavaScriptファイル -->
    <script src="enhanced_ecg.js"></script>
    
    <script>
        // ECGアニメーター初期化
        let ecgAnimator;
        
        // ページロード後にアニメーション開始
        window.addEventListener('load', function() {
            // 既存のフェードイン効果
            const elements = document.querySelectorAll('.fade-in');
            elements.forEach((el, index) => {
                setTimeout(() => {
                    el.style.opacity = '1';
                    el.style.transform = 'translateY(0)';
                }, index * 200);
            });

            // 高品質心電図アニメーションを初期化
            setTimeout(() => {
                ecgAnimator = new ECGAnimator();
                setTimeout(() => {
                    ecgAnimator.animateStaticWaves();
                }, 1000);
            }, 2000);
        });

        // スムーズスクロール
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({
                        behavior: 'smooth',
                        block: 'start'
                    });
                }
            });
        });
    </script>
</body>
</html>
